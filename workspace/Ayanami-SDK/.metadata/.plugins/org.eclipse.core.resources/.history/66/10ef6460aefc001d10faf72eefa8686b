/*
 * aya_driver_i2c.c
 *
 *  Created on: 2023年4月4日
 *      Author: KurehaTian
 */
#include "aya_driver_i2c.h"

const uint32_t sysctl_gpio[4] = {SYSCTL_PERIPH_GPIOB, SYSCTL_PERIPH_GPIOA, SYSCTL_PERIPH_GPIOE, SYSCTL_PERIPH_GPIOD};

void i2c_init(i2c_index_enum i2c_n)
{
    switch (i2c_n)
    {
    case I2C_0:
        // sysctl-i2c使能
        SysCtlPeripheralEnable(SYSCTL_PERIPH_I2C0);
        // sysctl-gpio使能
        SysCtlPeripheralEnable(SYSCTL_PERIPH_GPIOB);
        // IO配置
        GPIOPinConfigure(GPIO_PB2_I2C0SCL);
        GPIOPinConfigure(GPIO_PB3_I2C0SDA);
        GPIOPinTypeI2CSCL(GPIO_PORTB_BASE, GPIO_PIN_2);
        GPIOPinTypeI2C(GPIO_PORTB_BASE, GPIO_PIN_3);
        //时钟配置
        I2CMasterInitExpClk(I2C0_BASE,SysCtlClockGet(),true);
        //I2CMasterEnable(I2C0_BASE);
        break;
    case I2C_1:
        /* code */
        break;
    case I2C_2:
        /* code */
        break;
    case I2C_3:
        /* code */
        break;

    default:
        break;
    }
    // sysctl-gpio使能
    SysCtlPeripheralEnable(sysctl_gpio[i2c_n]);

    // 引脚功能配置
}
